# Lab3 Report

***
## 练习1

**给未被映射的地址映射上物理页：**

先检查页表中是否有该地址对应的表项。若表项为空则未被映射。
对未被映射的地址，使用`pgdir_alloc_page`函数获取物理页。
```c
    ptep = get_pte(mm->pgdir, addr, 1);
    if(ptep == NULL) {
        cprintf("get_pte failed\n");
        goto failed;
    }
    if (*ptep == 0) {
        struct Page *page = pgdir_alloc_page(mm->pgdir, addr, perm);
        if (page == NULL){
            cprintf("pgdir_alloc_page failed\n");
            goto failed;            
        }
    }
```
![1](picture/3-1.png "3-1.png")
经验证，能够通过check_pgfault函数的测试。

- Q1. 请描述页目录项（Page Directory Entry）和页表项（Page Table Entry）中组成部分对ucore实现页替换算法的潜在用处。

    `PTE_A`表示是否被访问，`PTE_D`表示是否被修改，对Clock算法、Enhanced Clock算法和LRU算法有潜在用处。

- Q2. 如果ucore的缺页服务例程在执行过程中访问内存，出现了页访问异常，请问硬件要做哪些事情？
    
    硬件将引发页访问异常的地址保存在cr2寄存器中，设置错误代码，然后触发Page Fault异常。

***
## 练习2

**补充完成基于FIFO的页面替换算法：**
