# Lab3 Report

***
## 练习1

**给未被映射的地址映射上物理页：**

先检查页表中是否有该地址对应的表项。若表项为空则未被映射。
对未被映射的地址，使用`pgdir_alloc_page`函数获取物理页。
```c
    ptep = get_pte(mm->pgdir, addr, 1);
    if(ptep == NULL) {
        cprintf("get_pte failed\n");
        goto failed;
    }
    if (*ptep == 0) {
        struct Page *page = pgdir_alloc_page(mm->pgdir, addr, perm);
        if (page == NULL){
            cprintf("pgdir_alloc_page failed\n");
            goto failed;            
        }
    }
```
![1](picture/3-1.png "3-1.png")
经验证，能够通过check_pgfault函数的测试。